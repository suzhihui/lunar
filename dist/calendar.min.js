!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(t=t||self).lunar=s()}(this,function(){"use strict";return function(t,s,a){var u=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],y=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],c=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],d="日一二三四五六七八九十",f=["正","二","三","四","五","六","七","八","九","十","十一","腊"],M={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1001:"*3国庆节",1201:"艾滋病日",1224:"平安夜",1225:"圣诞节"},p={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节",1015:"下元节",1208:"腊八节",1223:"小年"};return new function(t){function s(t,s){return new Date(31556925974.7*(t-1900)+6e4*y[s]+Date.UTC(1900,0,6,2,5)).getUTCDate()}function n(t){var s,a=348;for(s=32768;8<s;s>>=1)a+=u[t-1900]&s?1:0;return a+r(t)}function a(t){return"甲乙丙丁戊己庚辛壬癸".charAt(t%10)+"子丑寅卯辰巳午未申酉戌亥".charAt(t%12)}function h(t,s){return u[t-1900]&65536>>s?30:29}function i(t){return t<10?"0"+(0|t):t}function e(t,s){var a=t;return s.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(t){switch(t){case"yyyy":var s="000"+a.getFullYear();return s.substring(s.length-4);case"dd":return i(a.getDate());case"d":return a.getDate().toString();case"MM":return i(a.getMonth()+1);case"M":return a.getMonth()+1}})}var r=function(t){return o(t)?65536&u[t-1900]?30:29:0},o=function(t){return 15&u[t-1900]};this.isToday=!1,this.isRestDay=!1,this.solarYear=e(t,"yyyy"),this.solarMonth=e(t,"M"),this.solarDate=e(t,"d"),this.solarWeekDay=t.getDay(),this.inWeekDays="星期"+d.charAt(this.solarWeekDay);var l=new function(t){var s,a,i=0,e=(t-new Date(1900,0,31))/864e5;for(this.dayCyl=e+40,this.monCyl=14,s=1900;s<2050&&0<e;s++)e-=i=n(s),this.monCyl+=12;for(e<0&&(e+=i,s--,this.monCyl-=12),this.year=s,this.yearCyl=s-1864,a=o(s),this.isLeap=!1,s=1;s<13&&0<e;s++)i=0<a&&s==a+1&&0==this.isLeap?(--s,this.isLeap=!0,r(this.year)):h(this.year,s),1==this.isLeap&&s==a+1&&(this.isLeap=!1),e-=i,0==this.isLeap&&this.monCyl++;0==e&&0<a&&s==a+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--s,--this.monCyl)),e<0&&(e+=i,--s,--this.monCyl),this.month=s,this.day=e+1}(t);this.lunarYear=l.year,this.shengxiao="鼠牛虎兔龙蛇马羊猴鸡狗猪".charAt((this.lunarYear-4)%12),this.lunarMonth=l.month,this.lunarIsLeapMonth=l.isLeap,this.lnongMonth=this.lunarIsLeapMonth?"闰"+f[l.month-1]:f[l.month-1],this.lunarDate=l.day,this.showInLunar=this.lnongDate=function(t){var s;switch(t){case 10:s="初十";break;case 20:s="二十";break;case 30:s="三十";break;default:s="初十廿卅".charAt(Math.floor(t/10)),s+=d.charAt(t%10)}return s}((this.lunarMonth,this.lunarDate)),1==this.lunarDate&&(this.showInLunar=this.lnongMonth+"月"),this.ganzhiYear=a(l.yearCyl),this.ganzhiMonth=a(l.monCyl),this.ganzhiDate=a(l.dayCyl++),this.jieqi="",this.restDays=0,s(this.solarYear,2*(this.solarMonth-1))==e(t,"d")&&(this.showInLunar=this.jieqi=c[2*(this.solarMonth-1)]),s(this.solarYear,2*(this.solarMonth-1)+1)==e(t,"d")&&(this.showInLunar=this.jieqi=c[2*(this.solarMonth-1)+1]),"清明"==this.showInLunar&&(this.showInLunar="清明节",this.restDays=1),this.solarFestival=M[e(t,"MM")+e(t,"dd")],void 0===this.solarFestival?this.solarFestival="":/\*(\d)/.test(this.solarFestival)&&(this.restDays=parseInt(RegExp.$1),this.solarFestival=this.solarFestival.replace(/\*\d/,"")),this.showInLunar=""==this.solarFestival?this.showInLunar:this.solarFestival,this.lunarFestival=p[this.lunarIsLeapMonth?"00":i(this.lunarMonth)+i(this.lunarDate)],void 0===this.lunarFestival?this.lunarFestival="":/\*(\d)/.test(this.lunarFestival)&&(this.restDays=this.restDays>parseInt(RegExp.$1)?this.restDays:parseInt(RegExp.$1),this.lunarFestival=this.lunarFestival.replace(/\*\d/,"")),12==this.lunarMonth&&this.lunarDate==h(this.lunarYear,12)&&(this.lunarFestival=p["0100"],this.restDays=1),this.showInLunar=""==this.lunarFestival?this.showInLunar:this.lunarFestival}(new Date(t,s,a))}});
